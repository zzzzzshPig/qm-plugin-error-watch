!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("querystring")):"function"==typeof define&&define.amd?define(["querystring"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["qm-rollup-template"]=e(t.querystring)}(this,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=e(t);var n=new(function(){function t(){this.target="",this.title="",this.env="",this.tokenKey=""}return t.prototype.init=function(t){var e=void 0===t?{}:t,n=e.tokenKey,i=void 0===n?"token":n,r=e.target,l=void 0===r?"_self":r,s=e.title,a=void 0===s?"登录":s,u=e.env,c=void 0===u?"development":u;this.env=c,this.target=l,this.title=a,this.tokenKey=i;var d=o.default.parse(location.search.slice(1)).qm_token;d?(localStorage.setItem(i,JSON.stringify(d)),history.pushState({},"",location.href.replace(/qm_token=[^&]*&?/,""))):localStorage.getItem(i)||this.login()},t.prototype.login=function(){!function(t,e){var o=document.createElement("a"),n="___false_click";o.setAttribute("href",t),o.setAttribute("target",e),o.setAttribute("id",n),document.getElementById(n)||document.body.appendChild(o),o.click()}(("production"===this.env?"https://admin.91xiangju.com/frontend-platform/login":"http://192.168.1.160:8001/login")+"?"+("qm_from="+encodeURIComponent(location.href))+("&title="+encodeURIComponent(this.title)),this.target)},t.prototype.logout=function(){localStorage.removeItem(this.tokenKey),this.login()},t}());return window.qmLogin=n,n}));
