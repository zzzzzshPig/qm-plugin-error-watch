import t from"querystring";var e=new(function(){function e(){this.target="",this.title="",this.env="",this.tokenKey=""}return e.prototype.init=function(e){var o=void 0===e?{}:e,i=o.tokenKey,n=void 0===i?"token":i,r=o.target,l=void 0===r?"_self":r,a=o.title,s=void 0===a?"登录":a,c=o.env,h=void 0===c?"development":c;this.env=h,this.target=l,this.title=s,this.tokenKey=n;var d=t.parse(location.search.slice(1)).qm_token;d?(localStorage.setItem(n,JSON.stringify(d)),history.pushState({},"",location.href.split("?")[0])):localStorage.getItem(n)||this.login()},e.prototype.login=function(){!function(t,e){var o=document.createElement("a"),i="___false_click";o.setAttribute("href",t),o.setAttribute("target",e),o.setAttribute("id",i),document.getElementById(i)||document.body.appendChild(o),o.click()}(("production"===this.env?"http://192.168.1.160:8001/login":"https://admin.91xiangju.com/frontend-platform/login")+"?"+("qm_from="+encodeURIComponent(location.href))+("&title="+encodeURIComponent(this.title)),this.target)},e.prototype.logout=function(){localStorage.removeItem(this.tokenKey),this.login()},e}());export default e;
